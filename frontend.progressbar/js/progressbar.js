function readJSON(e,t,n){var o=new XMLHttpRequest;o.open("GET",e,!0),o.onreadystatechange=function(){4==o.readyState&&(200==o.status?t(JSON.parse(o.responseText)):n(status))},o.send()}function processData(e){"object"==typeof e?jsonData=e:0==e?jsonData=JSON.parse(e):console.log("Invalid");for(var t=jsonData.limit,n="",o="",s=0;s<jsonData.buttons.length;s++)n=n+"<button class='button-layout' value='"+(o=jsonData.buttons[s])+"' onclick='barProgressControl("+o+","+t+")'>"+(jsonData.buttons[s]>0?"+"+jsonData.buttons[s]:jsonData.buttons[s])+"</button>";document.getElementById("buttoncontrol").innerHTML=n;var a="",r="",c="",d="";c="<select id='selectprogressbar'>";for(var l=0;l<jsonData.bars.length;l++)c=c+"<option value='progress"+(r=l+1)+"'>#progress"+r+"</option>",a=a+"<div class='progress-rectangle'><div class='progress-layout' style='width:"+(d=jsonData.bars[l])+"%' id='progress"+r+"'></div><div class='progress-percent' id='percentageprogress"+r+"'>"+d+"%</div></div>";c+="</select>",document.getElementById("progresscontrol").innerHTML=a,document.getElementById("barcontrol").innerHTML=c}function barProgressControl(e,t){var n=document.getElementById("selectprogressbar").options[document.getElementById("selectprogressbar").selectedIndex].value,o=document.getElementById("percentage"+n).innerHTML,s=parseInt(o)+parseInt(e);s<=0?(document.getElementById(n).style="width:0%;transition: width 0.4s",document.getElementById("percentage"+n).innerHTML="0%"):s>=t?(document.getElementById(n).style=" width:"+s+"%; background-color:red;transition: width 0.4s",document.getElementById("percentage"+n).innerHTML=s+"%"):(document.getElementById(n).style="width:"+s+"%; transition: width 0.4s",document.getElementById("percentage"+n).innerHTML=s+"%")}var pathData="http://pb-api.herokuapp.com/bars",jsonData="";readJSON(pathData,function(e){console.log(e),processData(e)},function(e){console.log(e)});